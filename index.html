<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="favicon.ico">

	<title>GurglGas</title>

	<!-- Bootstrap core CSS -->
	<link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
	<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
	<script src="lib/bootstrap/assets/js/ie-emulation-modes-warning.js"></script>

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<!-- Custom styles for this template -->
		<link href="carousel.css" rel="stylesheet">
		<link href="signin.css" rel="stylesheet">
		<link href='//fonts.googleapis.com/css?family=Palanquin Dark' rel='stylesheet'>

	</head>
<!-- NAVBAR
	================================================== -->
	<body style="font-family:'Palanquin Dark'">
		<div class="navbar-wrapper">
			<div class="container">

				<header class="navbar navbar-inverse navbar-fixed-top">
					<div class="container">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="#">GurglGas</a>
						</div>
						<nav id="navbar" class="navbar-collapse collapse">
							<ul class="nav navbar-nav">
								<li class="active"><a href="#">Home</a></li>
								<li><a href="#about">About</a></li>
								<li><a href="#areas">Areas</a></li>
								<li><a href="#faq">FAQs</a></li>
								<li><a href="#contact">Contact</a></li>
								<!-- <li class="dropdown">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a>
									<ul class="dropdown-menu" role="menu">
										<li><a href="#">Action</a></li>
										<li><a href="#">Another action</a></li>
										<li><a href="#">Something else here</a></li>
										<li class="divider"></li>
										<li class="dropdown-header">Nav header</li>
										<li><a href="#">Separated link</a></li>
										<li><a href="#">One more separated link</a></li>
									</ul>
								</li> -->
							</ul>
						</nav>
					</div>
				</header>

			</div>
		</div>

		<!-- Carousel
		================================================== -->
		<div class="carousel slide" style="margin-bottom: 0px; height: 100%;" data-ride="carousel">
			<div class="carousel-inner" role="listbox">
				<div class="item active" style="height: 100vh;">
					<img class="img-responsive" src="img/refuel.jpg" alt="First slide" style=" min-height: 100%; min-width: 100%; position: absolute;">
					<div class="container">
						<div class="carousel-caption" style="top: 10px">
							<h1>Fueling your car for you!</h1>
							<p>Sign up below if you would like this service in your area.</p>
							<div id="signup-reponse">
								<form class="form-inline" id="signUpForm">
									<div class="form-group">
										<label for="inputEmail" class="sr-only">Email address</label>
										<input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
										<div class="form-group">
										</div>
										<label for="inputZip" class="sr-only">Zip Code</label>
										<input type="text" id="inputZip" class="form-control" placeholder="Zip Code" required>
									</div>
									<div class="form-group">
										<label class="control-label">How did you hear about us:</label>
										<p>
											<select class="form-control" id="inputSrc" required>
												<option value=""></option>
												<option value="App Store">App Store</option>
												<option value="App Store">Google</option>
												<option value="Event Around Town">Event Around Town</option>
												<option value="Facebook">Facebook</option>
												<option value="Friend or Family">Friend or Family</option>
												<option value="Mailer/Postcard/Flyer">Mailer/Postcard/Flyer</option>
												<option value="Forum or Search">Forum or Search</option>
												<option value="Other">Other</option>
											</select>
										</p>
									</div>
									<br>
									<button type="submit" class="btn btn-lg btn-primary" role="button">I'm Interested!</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div><!-- /.carousel -->
		
		

		<!-- Marketing messaging and featurettes
		================================================== -->
		<!-- Wrap the rest of the page in another container to center all the content. -->

		<div id="about" class="container marketing" style="padding-top: 100px">

			<!-- Three columns of text below the carousel -->
			<div class="row">
				<div class="col-lg-4">
					<img class="img-rounded" src="img/noGasPump.png" alt="Forget the pump" style="width: 140px; height: 140px;">
					<h1>Forget the pump!</h1>
					<p>Stop making trips to the gas station when you don't need to.</p>
					<p><a class="btn btn-default" href="#feature-1" role="button">View details &raquo;</a></p>
				</div><!-- /.col-lg-4 -->
				<div class="col-lg-4">
					<img class="img-rounded" src="img/gasTruck.png" alt="We come to you" style="width: 140px; height: 140px;">
					<h1>We come to you!</h1>
					<p>Let us know when and where you want your gas delivered, and then forget about it!</p>
					<p><a class="btn btn-default" href="#feature-2" role="button">View details &raquo;</a></p>
				</div><!-- /.col-lg-4 -->
				<div class="col-lg-4">
					<img class="img-rounded" src="img/phone.png" alt="Check out the App" style="width: 140px; height: 140px;">
					<h1>Check out the App!</h1>
					<p>Its free, and easy to use!</p>
					<p><a class="btn btn-default" href="#feature-3" role="button">View details &raquo;</a></p>
				</div><!-- /.col-lg-4 -->
			</div><!-- /.row -->


			<!-- START THE FEATURETTES -->

			<hr class="featurette-divider">

			<div id="feature-1" class="row featurette" style="padding-top: 50px">
				<div class="col-md-7">
					<h2 class="featurette-heading">Why go to the gas station when it can come to you? <span class="text-muted">Welcome to tomorrow.</span></h2>
					<p class="lead">We all lead busy lives. We know that. You know that. So let GurglGas simplify one aspect of your life. No more inconvenient stops at the gas station late at night, when you are in a rush, or it is cold outside. Now you can stay focused on getting everything else done without the hassle of refueling. Just leave it to us!</p>
				</div>
				<div class="col-md-5">
					<img class="featurette-image img-responsive" src="img/noGasPump.png" alt="Forget the pump">
				</div>
			</div>

			<hr class="featurette-divider">

			<div id="feature-2" class="row featurette" style="padding-top: 50px">
				<div class="col-md-5">
					<img class="featurette-image img-responsive" src="img/gasTruck.png" alt="We deliver">
				</div>
				<div class="col-md-7">
					<h2 class="featurette-heading">We deliver. <span class="text-muted">See for yourself.</span></h2>
					<p class="lead">We will come to you, wherever you are. You set the time and place for normal deliveries, and we will be there. Have to run an errand? No worries! We have you covered and will come to you wherever you are, or postpone the delivery if need be. No matter what, you won't be held up by us, or the gas station!</p>
				</div>
			</div>

			<hr class="featurette-divider">

			<div id="feature-3" class="row featurette" style="padding-top: 50px">
				<div class="col-md-7">
					<h2 class="featurette-heading">Looking for an App? <span class="text-muted">Checkmate.</span></h2>
					<p class="lead">We have that too. Check out our app for iOS or Android. Simple, sleek, intuitive. All the information you need at your fingertips! See everything from service history and schedule, billing preferences, current rates, and where a service truck is for on-demand delivery if you need a top-off. Its all there!</p>
				</div>
				<div class="col-md-5">
					<img class="featurette-image img-responsive" src="img/phone.png" alt="Checkout the App">
				</div>
			</div>

			<hr class="featurette-divider">

			<!-- /END THE FEATURETTES -->

		</div>

		<div id="areas" class="container marketing">

			<div class="jumbotron">
				<h2 class="title" style="text-align: center">Service Areas</h2>
				<p class="lead">GurglGas will be available in Denver, and Colorado Springs, along with other interested areas to follow!</p>
				<div class="row">
					<div class="col-sm-6">
						<img src="img/denver.png" style="max-width: 100%;">
						<p>Denver Area</p>
					</div>
					<div class="col-sm-6">
						<img src="img/cos.png" style="max-width: 100%;">
						<p>Colorado Springs Area</p>
					</div>
				</div>
			</div>

			<div id="faq" class="row marketing">
				<h2 style="text-align: center">FAQs</h2>
				<div class="col-lg-6">
					<h3>FAQ 1</h3>
					<h4>What do people think?</h4>
					<p>People love it!</p>
				</div>
				<div class="col-lg-6">
					<h3>FAQ 2</h3>
					<h4>What do people say?</h4>
					<p>People say its the best!</p>
				</div>
			</div>

			<div id="contact" class="row marketing">
				<div class="panel-body">
					<h2 style="text-align: center">Contact</h2>
					Send us an email
					<a href="mailto:ty.a.madsen@gmail.com">Contact Us</a>
				</div>
			</div>

			<!-- FOOTER -->
			<footer>
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p>&copy; 2016 GurglGas, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
			</footer>

		</div><!-- /.container -->


		<!-- Bootstrap core JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="lib/js/jquery.min.js"></script>
		<script src="lib/bootstrap/js/bootstrap.min.js"></script>
		<script src="lib/bootstrap/assets/js/docs.min.js"></script>
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<script src="lib/bootstrap/assets/js/ie10-viewport-bug-workaround.js"></script>

		<script type="text/javascript">

			// Your Client ID can be retrieved from your project in the Google
			// Developer Console, https://console.developers.google.com
			var CLIENT_ID = '1022758500648-opdih50enm95rnp26ikkohjdd19hi0qo.apps.googleusercontent.com';

			var SCRIPT_ID = '1nvvvIAakuYuhNyLD66WAFxrFheliZY6F_fKxC246aOmgQohyeiAdILyz';

			var SCOPES = ['https://www.googleapis.com/auth/spreadsheets',
			'email'];

			var userEmail = "";

			var authorized = false;
			
			/**
			 * Check if current user has authorized this application.
			 */
			function checkAuth() {
				gapi.auth.authorize({
					'client_id': CLIENT_ID,
					'scope': SCOPES,
					'immediate': true
				}, handleAuthResult);
			}

			/**
			 * Handle response from authorization server.
			 *
			 * @param {Object} authResult Authorization result.
			 */
			function handleAuthResult(authResult) {
				if (authResult && !authResult.error) {
					authorized = true;

					var op = gapi.client.request({
						'root': 'https://www.googleapis.com/',
						'path': 'oauth2/v1/userinfo?alt=json',
						'method': 'GET'
					});


					op.execute(function(resp){
						if(resp.verified_email){
							console.log(resp.email);
							var request = {
								'function': 'isSignedUp',
								'parameters': [resp.email]
							};

							var op2 = gapi.client.request({
								'root': 'https://script.googleapis.com',
								'path': 'v1/scripts/' + SCRIPT_ID + ':run',
								'method': 'POST',
								'body': request
							});

							op2.execute(handleScriptResp);

						}
					});
				} else {
					authorized = false;
				}
			}

			function handleScriptResp(resp) {

				console.log(resp);
				console.log(resp.response);

				//TODO: do something with response
				// if successful change sign up for to a thank you note
				// else try again

				if(!resp.error && resp.response.result && resp.response.result.message) {
					$("#signup-reponse").html('<h2>' + resp.response.result.message + '</h2>');
				}
			}

			$(document).ready(function() {
				$('#signUpForm').submit(function(e) {
					submitForm(e);
				});
			});

			function sendData() {

				var email = document.getElementById("inputEmail").value;
				var zip = document.getElementById("inputZip").value;
				var src = document.getElementById("inputSrc").value;

				var op = gapi.client.request({
					'root': 'https://www.googleapis.com/',
					'path': 'oauth2/v1/userinfo?alt=json',
					'method': 'GET'
				});

				op.execute(function(resp){ 

					if(resp.verified_email) {
						userEmail = resp.email;
					}
					var request = {
						'function': 'saveData',
						'parameters': [
						email,
						zip,
						src,
						userEmail
						]
					};

					var op = gapi.client.request({
						'root': 'https://script.googleapis.com',
						'path': 'v1/scripts/' + SCRIPT_ID + ':run',
						'method': 'POST',
						'body': request
					});

					op.execute(handleScriptResp);
				});

			}

			function submitForm(e) {
				e.preventDefault();

				if(authorized) {
					sendData();
					e.target.reset();
				}
				else {
					gapi.auth.authorize({
						client_id: CLIENT_ID,
						scope: SCOPES,
						immediate: false
					}, 
					function(authResult) {
						if(authResult && !authResult.error) {
							sendData();
							e.target.reset();
						}
					});
				}
			}
		</script>

	</body>
	<script src="https://apis.google.com/js/client.js?onload=checkAuth"></script>
</html>
